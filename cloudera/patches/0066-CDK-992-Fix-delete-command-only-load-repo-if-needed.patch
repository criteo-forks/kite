From 37e0b220c6a0a0ee68e633a50baf37dbec613527 Mon Sep 17 00:00:00 2001
From: Ryan Blue <blue@apache.org>
Date: Wed, 27 May 2015 17:54:18 -0700
Subject: [PATCH 066/140] CDK-992: Fix delete command, only load repo if
 needed.

---
 .../org/kitesdk/cli/commands/DeleteCommand.java    |    8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

diff --git a/kite-tools-parent/kite-tools/src/main/java/org/kitesdk/cli/commands/DeleteCommand.java b/kite-tools-parent/kite-tools/src/main/java/org/kitesdk/cli/commands/DeleteCommand.java
index 5bf3760..e56f1e5 100644
--- a/kite-tools-parent/kite-tools/src/main/java/org/kitesdk/cli/commands/DeleteCommand.java
+++ b/kite-tools-parent/kite-tools/src/main/java/org/kitesdk/cli/commands/DeleteCommand.java
@@ -17,16 +17,12 @@ package org.kitesdk.cli.commands;
 
 import com.beust.jcommander.Parameter;
 import com.beust.jcommander.Parameters;
-import com.google.common.annotations.VisibleForTesting;
 import com.google.common.base.Preconditions;
 import com.google.common.collect.Lists;
 import java.io.IOException;
-import java.net.URI;
 import java.util.List;
-import java.util.Map;
 import org.kitesdk.data.Datasets;
 import org.kitesdk.data.View;
-import org.kitesdk.data.spi.DatasetRepository;
 import org.slf4j.Logger;
 
 @Parameters(commandDescription = "Delete a view or a dataset and its metadata")
@@ -41,8 +37,6 @@ public class DeleteCommand extends BaseDatasetCommand {
 
   @Override
   public int run() throws IOException {
-    DatasetRepository repo = getDatasetRepository();
-
     if (targets == null || targets.isEmpty()) {
       throw new IllegalArgumentException("No views or datasets were specified.");
     }
@@ -56,7 +50,7 @@ public class DeleteCommand extends BaseDatasetCommand {
       } else if (isDatasetUri(uriOrName)) {
         Datasets.delete(uriOrName);
       } else {
-        repo.delete(namespace, uriOrName);
+        getDatasetRepository().delete(namespace, uriOrName);
       }
       console.debug("Deleted {}", uriOrName);
     }
-- 
1.7.9.5

